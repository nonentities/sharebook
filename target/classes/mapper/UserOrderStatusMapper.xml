<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >  
<mapper namespace="com.swpu.sharebook.mapper.UserOrderStatusMapper">
<resultMap type="com.swpu.sharebook.entity.BorringStatus" id="borringStatus">
	<result column="userId" property="userId"/>
	<result column="bId" property="bId"/>
	<result column="borrwingStatus" property="borrwingStatus"/>
	<result column="loanHour" property="loanHour"/>
	<result column="returnTime" property="returnTime"/>
	<result column="sendStatus" property="sendStatus"/>
</resultMap>
<!-- 插入操作即用户需要将 -->
<insert id="addStatus" parameterType="com.swpu.sharebook.entity.BorringStatus">
	insert into borringstatus (userId,bId,borrwingStatus,loanHour,sendStatus,returnTime)
	 values(#{userId},#{bId},#{borrwingStatus},#{loanHour},#{sendStatus},#{returnTime})
</insert>
<select id="selectBorringStatus" parameterType="com.swpu.sharebook.entity.BorringStatus" resultMap="borringStatus">
	select *from borringstatus
	<where>
	 bId=#{bId} and userId=#{userId}
	<choose>
	<!-- 存在问题到时候有问题 -->
		<!-- <when test="bId !=null">
		  bId=#{bId} 
		</when>
		<when test="userId != null">
		 and userId=#{userId}
		</when> -->
		<!-- <when test="borrwingStatus !=null">
		and borrwingStatus=#{borrwingStatus}
		</when> -->
		<!-- <when test="sendStatus !=null">
		and sendStatus=#{sendStatus}
		</when> -->
		<when test="loanHour !=null">
		and loanHour=#{loanHour}
		</when>
		<when test="returnTime !=null">
		and returnTime=#{returnTime}
		</when>
		<otherwise>
		</otherwise>
	</choose>
	</where>
</select>
<!-- 更新操作实现 -->
<update id="updateBorringStatus" parameterType="com.swpu.sharebook.entity.BorringStatus">
update borringstatus 
<trim prefix="set" suffixOverrides=",">
  <if test="borrwingStatus!=null ">borrwingStatus=#{borrwingStatus},</if>
  <if test="sendStatus!=null ">sendStatus=#{sendStatus},</if>
  <if test="loanHour !=null">loanHour=#{loanHour},</if>
  <if test="returnTime !=null">returnTime=#{returnTime},</if>
 </trim>
 where(bId=#{bId} and userId=#{userId})
</update>

 <!-- 删除订单 -->
 <delete id="delete" parameterType="com.swpu.sharebook.entity.BorringStatus">
 delete  from `borringstatus` where(bId=#{bId} and userId=#{userId} )
 </delete>
</mapper>